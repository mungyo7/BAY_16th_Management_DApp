βΊ BAY μ¶μ„μ²΄ν¬ μ»¨νΈλ™νΈ κµ¬μ΅° λ° μ‘λ™λ°©μ‹ λ¶„μ„ π“

π—οΈ μ „μ²΄ μ•„ν‚¤ν…μ² κ°μ”

ν”„λ΅κ·Έλ¨ κµ¬μ΅°

bay_attendance_check/
β”β”€β”€ ν•µμ‹¬ λ΅μ§
(programs/bay_attendance_check/src/)
β”‚   β”β”€β”€ lib.rs          β†’ λ©”μΈ μ§„μ…μ 
β”‚   β”β”€β”€ state.rs        β†’ λ°μ΄ν„° κµ¬μ΅° μ •μ
β”‚   β”β”€β”€ errors.rs       β†’ μ—λ¬ νƒ€μ…
β”‚   β””β”€β”€ instructions/   β†’ κ° κΈ°λ¥λ³„ λ΅μ§
β”‚       β”β”€β”€ initialize_member.rs
β”‚       β”β”€β”€ initialize_session.rs
β”‚       β”β”€β”€ check_in.rs
β”‚       β”β”€β”€ update_session.rs
β”‚       β””β”€β”€ get_stats.rs
β””β”€β”€ ν΄λΌμ΄μ–ΈνΈ (scripts/)
    β”β”€β”€ admin.ts        β†’ μ΄μμ§„ κ΄€λ¦¬
    β”β”€β”€ member.ts       β†’ ν•™νμ› κΈ°λ¥
    β””β”€β”€ stats.ts        β†’ ν†µκ³„ μ΅°ν

π“¦ ν•µμ‹¬ λ°μ΄ν„° κµ¬μ΅°

1. Member (ν•™νμ› κ³„μ •)

pub struct Member {
    pub wallet: Pubkey,          // ν•™νμ› μ§€κ°‘ μ£Όμ†
    pub role: MemberRole,        // μ—­ν•  (Admin/Member)
    pub total_attendance: u32,   // μ΄ μ¶μ„ νμ
    pub total_late: u32,         // μ΄ μ§€κ° νμ
    pub total_absence: u32,      // μ΄ κ²°μ„ νμ
    pub total_points: u64,       // μ΄ νλ“ ν¬μΈνΈ
    pub is_active: bool,         // ν™μ„±ν™” μƒνƒ
    pub bump: u8,                // PDA bump
}

2. Session (μ„Έμ… κ³„μ •)

pub struct Session {
    pub admin: Pubkey,           // μ„Έμ… μƒμ„± μ΄μμ§„
    pub session_date: i64,       // μ„Έμ… λ‚ μ§
    pub start_time: i64,         // μ‹μ‘ μ‹κ°„ (7:30)
    pub late_time: i64,          // μ§€κ° κΈ°μ¤€ μ‹κ°„ (8:00)
    pub total_attendees: u32,    // μ΄ μ¶μ„μ μ
    pub total_late: u32,         // μ΄ μ§€κ°μ μ
    pub is_active: bool,         // μ„Έμ… ν™μ„± μƒνƒ
    pub bump: u8,
}

3. AttendanceRecord (μ¶μ„ κΈ°λ΅)

pub struct AttendanceRecord {
    pub member: Pubkey,          // ν•™νμ› μ£Όμ†
    pub session: Pubkey,         // μ„Έμ… μ£Όμ†
    pub check_in_time: i64,      // μ²΄ν¬μΈ μ‹κ°„
    pub status: AttendanceStatus,// μ¶μ„ μƒνƒ
    pub points_earned: u8,       // νλ“ ν¬μΈνΈ
    pub bump: u8,
}

π”‘ PDA (Program Derived Address) κµ¬μ΅°

PDA Seeds ν¨ν„΄

1. Member PDA: ["member", ν•™νμ›_μ§€κ°‘_μ£Όμ†]
2. Session PDA: ["session", μ„Έμ…_λ‚ μ§_λ°”μ΄νΈ]
3. AttendanceRecord PDA: ["attendance", μ„Έμ…_μ£Όμ†, ν•™νμ›_μ£Όμ†]

β™οΈ μ£Όμ” κΈ°λ¥ λ° μ‘λ™ λ°©μ‹

1. ν•™νμ› λ“±λ΅ (initialize_member)

[νλ¦„λ„]
μ‚¬μ©μ β†’ μ§€κ°‘ μ—°κ²° β†’ Member PDA μƒμ„± β†’ μ—­ν•  μ„¤μ • β†’ μ΄κΈ°ν™”
- μ΄μμ§„: Admin κ¶ν• ν•„μ”
- μΌλ° ν•™νμ›: λ„κµ¬λ‚ λ“±λ΅ κ°€λ¥
- κ° μ§€κ°‘λ‹Ή ν•λ‚μ Member κ³„μ •λ§ μƒμ„± κ°€λ¥

2. μ„Έμ… μƒμ„± (initialize_session)

[νλ¦„λ„]
μ΄μμ§„ β†’ λ‚ μ§/μ‹κ°„ μ„¤μ • β†’ Session PDA μƒμ„± β†’ ν™μ„±ν™”
- κ¶ν•: Admin μ—­ν• λ§ κ°€λ¥
- μ‹κ°„ μ„¤μ •:
- start_time: μ„Έμ… μ‹μ‘ μ‹κ°„
- late_time: μ§€κ° ν—μ© μ‹κ°„
- λ‚ μ§λ³„λ΅ κ³ μ ν• μ„Έμ… μƒμ„±

3. μ¶μ„ μ²΄ν¬ (check_in)

[νλ¦„λ„]
ν•™νμ› β†’ μ„Έμ… ν™•μΈ β†’ μ‹κ°„ κ²€μ¦ β†’ μƒνƒ κ²°μ • β†’ ν¬μΈνΈ μ§€κΈ‰

μ‹κ°„λ³„ μ²λ¦¬ λ΅μ§:
ν„μ¬μ‹κ°„ β‰¤ start_time     β†’ μ¶μ„ (10 ν¬μΈνΈ)
start_time < ν„μ¬μ‹κ°„ β‰¤ late_time β†’ μ§€κ° (5 ν¬μΈνΈ)
ν„μ¬μ‹κ°„ > late_time      β†’ μ²΄ν¬μΈ λ¶κ°€

κ²€μ¦ μ‚¬ν•­:
- μ„Έμ… ν™μ„±ν™” μƒνƒ
- ν•™νμ› ν™μ„±ν™” μƒνƒ
- μ¤‘λ³µ μ¶μ„ λ°©μ§€ (PDAλ΅ λ³΄μ¥)

4. μ„Έμ… κ΄€λ¦¬ (update_session_status)

- Adminλ§ μ„Έμ… μƒνƒ λ³€κ²½ κ°€λ¥
- ν™μ„±/λΉ„ν™μ„± ν† κΈ€

5. ν†µκ³„ μ΅°ν (get_stats)

- ν•™νμ› ν†µκ³„: μ¶μ„/μ§€κ°/κ²°μ„ νμ, μ΄ ν¬μΈνΈ
- μ„Έμ… ν†µκ³„: μ°Έμ„μ μ, μ§€κ°μ μ

π” λ³΄μ• λ° κ¶ν• κµ¬μ΅°

κ¶ν• κ³„μΈµ

Admin (μ΄μμ§„)
β”β”€β”€ μ„Έμ… μƒμ„±/μΆ…λ£
β”β”€β”€ ν†µκ³„ μ „μ²΄ μ΅°ν
β””β”€β”€ κΈ΄κΈ‰ μμ • κ¶ν•

Member (μΌλ° ν•™νμ›)
β”β”€β”€ λ³ΈμΈ μ¶μ„ μ²΄ν¬
β”β”€β”€ λ³ΈμΈ κΈ°λ΅ μ΅°ν
β””β”€β”€ ν¬μΈνΈ ν™•μΈ

λ³΄μ• λ©”μ»¤λ‹μ¦

1. PDA κΈ°λ° κ³„μ • κ΄€λ¦¬: μμΈ΅ κ°€λ¥ν• μ£Όμ†λ΅ μ¤‘λ³µ λ°©μ§€
2. Signer κ²€μ¦: νΈλμ­μ… μ„λ…μ ν™•μΈ
3. μ‹κ°„ κ²€μ¦: λΈ”λ΅μ²΄μΈ Clock μ‚¬μ©
4. μ—λ¬ μ²λ¦¬: λ…ν™•ν• μ—λ¬ νƒ€μ… μ •μ

π’° ν¬μΈνΈ μ‹μ¤ν…

ν¬μΈνΈ μ§€κΈ‰ κ·μΉ™

- μ¶μ„ (7:30 μ΄μ „): 10 ν¬μΈνΈ
- μ§€κ° (7:30-8:00): 5 ν¬μΈνΈ
- κ²°μ„: 0 ν¬μΈνΈ

ν¬μΈνΈ λ„μ 

- Member κ³„μ •μ total_pointsμ— μλ™ λ„μ 
- ν–¥ν›„ SPL ν† ν° μ—°λ™ κ°€λ¥

π€ μ‚¬μ© μ‹λ‚λ¦¬μ¤

μ΄μμ§„ μ›ν¬ν”λ΅μ°

1. κ΄€λ¦¬μ μ§€κ°‘μΌλ΅ Admin λ“±λ΅
2. μ„Έμ… μƒμ„± (λ‚ μ§, μ‹κ°„ μ„¤μ •)
3. ν•™νμ›λ“¤μ΄ μ¶μ„ μ²΄ν¬
4. μ„Έμ… μΆ…λ£
5. ν†µκ³„ ν™•μΈ

ν•™νμ› μ›ν¬ν”λ΅μ°

1. μ§€κ°‘ μƒμ„± λ° SOL μ¶©μ „
2. Member λ“±λ΅
3. μ„Έμ… μ‹κ°„μ— μ¶μ„ μ²΄ν¬
4. ν¬μΈνΈ λ° μ¶μ„ κΈ°λ΅ ν™•μΈ

π”§ κΈ°μ μ  νΉμ§•

1. Anchor Framework: νƒ€μ… μ•μ „μ„±κ³Ό κ°λ° νΈμμ„±
2. PDA ν¨ν„΄: κ³„μ • μ£Όμ† μμΈ΅ κ°€λ¥μ„±
3. μ‹κ°„ κΈ°λ° λ΅μ§: Solana Clock ν™μ©
4. μ›μμ  νΈλμ­μ…: λ¨λ“  μ‘μ—…μ΄ μ„±κ³µν•κ±°λ‚ μ „μ²΄ λ΅¤λ°±

π“ ν™•μ¥ κ°€λ¥μ„±

1. SPL ν† ν° ν†µν•©: μ‹¤μ  ν† ν°μΌλ΅ ν¬μΈνΈ μ§€κΈ‰
2. NFT λ°ν–‰: νΉλ³„ μ¶μ„ μ¦λ…μ„
3. μ›Ή μΈν„°νμ΄μ¤: React κΈ°λ° ν”„λ΅ νΈμ—”λ“
4. QR μ½”λ“: λ¨λ°”μΌ μ¶μ„ μ²΄ν¬
5. μ΄λ²¤νΈ λ΅κΉ…: μ²΄μΈ μ™Έλ¶€ λ°μ΄ν„° λ¶„μ„

μ΄ κµ¬μ΅°λ” ν¬λ…ν•κ³  μ‹ λΆ°ν•  μ μλ” μ¶μ„ κ΄€λ¦¬ μ‹μ¤ν…μ„ μ κ³µν•λ©°, λΈ”λ΅μ²΄μΈμ λ¶λ³€μ„±μ„ ν™μ©ν•΄ μ¶μ„ κΈ°λ΅μ μ„λ³€μ΅°λ¥Ό λ°©μ§€ν•©λ‹λ‹¤.